<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="style/reset.css">
    <link rel="stylesheet" href="style/common.css">
    <link rel="stylesheet" href="style/chat.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_420278_dad9ruj4q8c15rk9.css">

    <script src="js/jquery-3.2.1.min.js"></script>
</head>

<body>
    <div class="chat">
        <div class="userList">
            <ul>
                <li class="active">
                    <img src="images/avatar.png" alt="">
                    <div>
                        <h3>张三</h3>
                        <p>消息内容消息内容消息内容</p>
                    </div>
                </li>
                <li>
                    <img src="images/avatar.png" alt="">
                    <div>
                        <h3>张三</h3>
                        <p>消息内容消息内容消息内容</p>
                    </div>
                </li>
                <li></li>
                <li></li>
            </ul>
        </div>
        <div class="chat_main">
            <div class="chatTitle">
                <span class="chat_name">张三</span>
                <i class="iconfont icon-more"></i>
            </div>
            <div class="chat_box">
                <div class="content_list clearfix">
                    <div class="message">
                        <div class="message_system">
                            <div class="content">
                                17:18
                            </div>
                        </div>
                        <img src="images/avatar.png" alt="" class="avatar">
                        <div class="content">
                            <div class="bubble left">
                                <div class="bubble_cont">
                                    <div class="plain">
                                        <pre>你们公司居然还是前端妹子</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="message">
                        <!-- <div class="message_system">
                            <div class="content">
                                17:18
                            </div>
                        </div> -->
                        <img src="images/avatar.png" alt="" class="avatar">
                        <div class="content">
                            <div class="bubble left">
                                <div class="bubble_cont">
                                    <div class="plain">
                                        <pre>你们公司居然还是前端妹子</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="message me">
                        <!-- <div class="message_system">
                            <div class="content">
                                17:18
                            </div>
                        </div> -->
                        <img src="images/avatar.png" alt="" class="avatar">
                        <div class="content">
                            <div class="bubble bubble_primary right">
                                <div class="bubble_cont">
                                    <div class="plain">
                                        <pre>你们公司居然还是前端妹子</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="edit_box">
                <div class="toolbar">
                    <i class="iconfont icon-tupian"></i>
                    <i class="iconfont icon-pinggu"></i>
                    <i class="iconfont icon-ffuwu"></i>
                </div>
                <div class="edit_content">
                    <textarea name="" class="contentPush"></textarea>
                </div>
                <div class="action">
                    <span class="desc">按下Ctrl+Enter换行</span>
                    <button class="btn_send">发送</button>
                </div>
            </div>
        </div>
        <div class="chatdetails">
            <div class="chatdetails_box">
                <h1>控制体重群</h1>
                <div class="linkCode">
                    <i class="iconfont icon-erweima"></i> 查看群二维码
                </div>
                <div class="participant">
                    <div class="doctor">
                        <p>医师（
                            <span>4</span>）</p>
                        <ul class="clearfix">
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                        </ul>
                    </div>
                    <div class="users">
                        <p>康友（
                            <span>4</span>）</p>
                        <ul>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                            <li>
                                <img src="images/avatar.png" alt="">
                                <span>张三</span>
                            </li>
                        </ul>
                        <div class="switch_more">
                            查看更多群成员
                        </div>
                    </div>
                </div>
                <div class="stick">
                    <span>置顶聊天</span>
                    <input type="checkbox" id="inset_1">
                    <label for="inset_1"></label>
                </div>
                <div class="noDisturb">
                    <span>消息免打扰</span>
                    <input type="checkbox" id="inset_2">
                    <label for="inset_2"></label>
                </div>
                <div class="clearRecord">
                    <span>清除聊天记录</span>
                    <button class="clearR">清除</button>
                </div>
            </div>
        </div>
        <div class="link_more">
            <div class="link_more_box">
                <div class="mese_box">
                    <h1>诊后康复咨询</h1>
                    <span class="tag">康复咨询</span>
                    <div class="validity">
                        <p>有效期截止</p>
                        <p class="time">2018-2-12 17:55</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="sendEvaluate">
            <div class="proptitle">选择评估</div>
            <i class="iconfont icon-guanbi"></i>
            <div class="search">
                <i class="iconfont icon-sousuo"></i>
                <input type="text" class="searchInput" placeholder="搜索">
            </div>
            <ul>
                <li>
                    <span>
                        <input type="checkbox" class="input_check" id="check1">
                        <label for="check1"></label>
                    </span>
                    <div>高血压评估</div>
                </li>
                <li>
                    <span>
                        <input type="checkbox" class="input_check" id="check2">
                        <label for="check2"></label>
                    </span>
                    <div>高血压评估</div>
                </li>
                <li>
                    <span>
                        <input type="checkbox" class="input_check" id="check3">
                        <label for="check3"></label>
                    </span>
                    <div>高血压评估</div>
                </li>
            </ul>
            <div class="operation">
                <button class="confirm">确认</button>
                <button class="close">取消</button>
            </div>
        </div>
        <div class="edit_User">
            <i class="iconfont icon-guanbi"></i>
            <div class="edit_user_list">
                <div class="search">
                    <i class="iconfont icon-sousuo"></i>
                    <input type="text" class="searchInput" placeholder="搜索">
                </div>
                <div class="list_box">
                    <ul class="clearfix">
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三1</span>
                            <i class="iconfont icon-weixuanzhong2">
                            </i>
                            <input type="hidden" value="1">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三2</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="2">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三3</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="3">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三4</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="4">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="5">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="6">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="7">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="8">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="9">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="10">
                        </li>
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三</span>
                            <i class="iconfont icon-weixuanzhong2"></i>
                            <input type="hidden" value="11">
                        </li>
                    </ul>
                </div>
            </div>
            <div class="edit_user_Pending">
                <div class="tips">选择要添加（删除）的群成员</div>
                <div class="list_box">
                    <ul class="clearfix">
                        <li>
                            <img src="images/avatar.png" alt="">
                            <span>张三</span>

                            <i class="iconfont icon-huaban"></i>
                            <input type="hidden" value="1">
                        </li>
                    </ul>
                </div>
                <div class="operation">
                    <button class="confirm">确认</button>
                    <button class="close">取消</button>
                </div>
            </div>
        </div>

    </div>






</body>
<script>
    var h;
    $(".btn_send").click(function() {
        let content = $(".contentPush").val();
        sendContent(content)

    });
    $(document).keypress(function(e) {　　
        console.log(e.which)
        if (e.ctrlKey && e.which == 10) {
            $(".btn_send").click();

        }　　
    });

    function sendContent(content) {
        var messageHtml = '<div class="message me">' +
            '<img src="images/avatar.png" alt="" class="avatar">' +
            '<div class="content">' +
            '<div class="bubble bubble_primary right">' +
            '<div class="bubble_cont">' +
            '<div class="plain"><pre>' +
            content +
            '</pre></div></div></div></div></div>';

        if (content != "") {
            $(".content_list").append(messageHtml);
            $(".contentPush").val("11111")

        }
        h = $(".content_list").height()
        console.log(h)
        $(".chat_box").scrollTop(h)
    }
    $(".icon-guanbi").click(function() {
        $(this).parent().fadeOut();
    })
    $(".close").click(function() {
        $(".sendEvaluate").fadeOut();
        $(".edit_User").fadeOut();
    })
    $(".icon-pinggu").click(function() {
        $(".sendEvaluate").fadeIn();
    })
    $('.icon-more').click(function() {
        if ($(".link_more").hasClass("show")) {
            $(".link_more").removeClass("show");
        } else {
            $(".link_more").addClass("show");
            $(".chatdetails").removeClass("show");
        }
    })
    $('.chat_name').click(function() {
        if ($(".chatdetails").hasClass("show")) {
            $(".chatdetails").removeClass("show");
        } else {
            $(".chatdetails").addClass("show");
            $(".link_more").removeClass("show");
        }
    })
    $('.edit_user_list').on('click', 'li', function() {
        var _thisI = $(this).find(".iconfont");
        var userName = $(this).find("span").text();
        var userImage = $(this).find("img").attr("src");
        var inputVal = $(this).find("input").val();
        if (_thisI.hasClass('icon-xuanzhong1')) {
            _thisI.removeClass("icon-xuanzhong1").addClass("icon-weixuanzhong2");
            removeli(inputVal, $(".edit_user_Pending input"))
        } else {
            _thisI.removeClass("icon-weixuanzhong2").addClass("icon-xuanzhong1")
            var userName = $(this).find("span").text();
            var userImage = $(this).find("img").attr("src");
            var inputVal = $(this).find("input").val();
            var appendLi = '<li><img src="' + userImage + '" alt=""><span>' + userName +
                '</span><i class="iconfont icon-huaban"></i><input type="hidden" value="' + inputVal + '"></li>'
            $(".edit_user_Pending ul").append(appendLi);
        }
    })
    $('.edit_user_Pending').on('click', '.icon-huaban', function() {
        var huabanval = $(this).next("input").val()
        xuanzhongQuit(huabanval, $(".edit_user_list input"))
        $(this).parent("li").remove()
    })

    function removeli(params, elment) {
        console.log(params + elment)
        elment.each(function() {
            if ($(this).val() == params) {
                $(this).parent("li").remove();
            }
        })
    }

    function xuanzhongQuit(params, elment) {
        elment.each(function() {
            if ($(this).val() == params) {
                $(this).parent("li").find('.iconfont').removeClass("icon-xuanzhong1").addClass("icon-weixuanzhong2");
            }
        })
    }
</script>

</html>